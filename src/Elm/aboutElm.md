# Elmの特徴

Elmの特徴についてまとめてみます。

###Elmとは

GUIアプリケーションを記述するプログラミング言語として生まれ[^1]、今はブラウザアプリケーションを生成する言語として開発が進められています。

###Elmランタイム

Elmをコンパイルすると一つのjavascript（以下JS）ファイルになります。これをElmランタイムといいます。[^2]

[^2]:Elmランタイムが画面を作る仕組みは、読み込まれた時にDOM操作を行いDOM内にHTMLを構築することで行います。（いわゆるシングルページアプリケーション（SPA）のJSフレームワークが採用する方法です。）

Elmはオプションを付けずにコンパイルすると、Htmlファイルを出力します。これはElmランタイムと、ランタイムを読み込むコードが入ったHtmlを出力しています。

Elmランタイムのみの出力も出来ます。そうすると、画面を構築するDOMを指定することが出来、HTMLの一部だけに適用するといったこともできます（埋め込みモード）。
Elmランタイムのみの出力では他にも、他のJSライブラリとやり取りすることや、Elmランタイム起動時に初期値をJS側から渡すことが出来ます。また画面を使わないElmの利用も可能です。「Javascriptと連帯する方法まとめ」のページでも解説しています。

###Elm一つでHTML、CSS、Javascriptを生成する。

他のJSフレームワークでは、HTMLの表現に新しい構文を導入したりしますが、ElmではElmの構文一つで、HTML / JS / CSSを書くことが出来ます。
またHTML周りは仮想DOMという技術を使い、画面上で多くのDOM変更があれば負担を減らして描画することが出来ます。 使い方をelm-lang/html:Htmlのページで解説しています。


###Elm-Architectureという設計方針

GUIアプリケーションを作るのに、MVCやMVVMなどの設計方針がありますが、ElmではElm-Architectureという考え方で記述していきます。この考え方でElmはたった３つか４つの関数でGUIアプリケーションの根幹を表現します。Elm-Architectureは他のJSフレームワーク（redux、Cycle.js）に影響を与えてもいる考え方です。
書き方をElm-Architectureのページで解説しています。

###Elmはシンプルで小さな関数型言語

ElmはHaskellやいろんな関数型言語を参考にして、言語仕様がとても小さく強力なものになっています。
コードを眺めてみるとわかりやすそうと感じるのではないでしょうか。Elmの構文のページで解説しています。

###学習を始めて続けやすい

構文に始まり、Elmは学習の始めやすさや学習曲線を大事にしています。公式Webページには文章やサンプルが多くブラウザエディタやREPLなどで、すぐに試せる環境があります。なるべくシンプルに始めて、順番により高度なことを理解できるようになっています。

またHTMLという普段親しんでいるデータになるので、ブラウザで動作を確認できて、github-pagesなどで簡単に公開できます。
Elmは自分のステップでプログラミングを習得できます。



###パッケージ管理システムや、デバッガー

エコシステムも整備されています。
Elmのパッケージシステムでライブラリを管理します。
またファイル監視するツールもあります。ツールのページで解説しています。

###純粋、静的、型検査される

Elmは純粋関数型言語です。なので`try catch`や`goto`や`;`で句切られたりして、コードがジャンプするということが出来ないようになっています。これは書かれたコードが正しいことを（人間や型検査からみて）論証しやすいということです。

またJSにコンパイルするので、JSで動かす前に間違い箇所を教えてくれます。

Elmランタイムは壊れないと言われるくらいの信頼性があります。
純粋で静的型付きの機能で安全性が保証されることで、テストも少なくなります。

###バージョンアップ時に、破壊的変更が行われることが多い。

Elmは過去のバージョンとの互換性を捨ててでもより良いツールにする方を優先する、というスタンスなので、バージョンアップ毎に大きく変わります。ソースコードの変更はいつも人力で無理のない量ですが、更新時は情報を追う必要があるかもしれません。

###発展途中

まだまだ便利なライブラリとかが不足しています。情報が足りてないところもあります。
採用しない理由に、良いドキュメントがないことや、新しすぎる、などが挙がっているそうです。

###Elmの使われ方

今のElmは、主にSEOや動作速度を気にしないツール系が得意です。内製ツールの作成等の実績を聞きます。

まだ情報が少ないですが、ElectronやReact Nativeなどフロントエンド以外の環境でもElmを使うことが出来ます。

速度やSEOを気にするWeb系ならJSを少しずつ置き換える使い方から始めるのがいい様です。
埋め込む機能を使い、Webページの一部分のアプリケーションをElmで記述するという使い方もできます。

急に高度なSPA（シングルページアプリケーション）を作ろうとするのは難しいと思われます。目的によってはWebフレームワークのテンプレートのほうが、便利さ的にもセキュリティ的にも上かもしれません。

SEOに関してですが、Elmにサーバーサイドレンダリング機能がまだ無いです。

また新しい技術を覚えるのはいつでも負担を強いますし、HTML、CSS、JSの知識に、さらにElmといった感じになります。しかし関数型言語の勉強にはとてもなります。

バージョンアップで大きく進化するのがElmなので、次のバージョンでこのあたりの認識もまた変わると思います。

#使ってみると

向き不向きはありますが、Elmで作ってみるととにかく作りやすいです。そしてコードは全体を見渡しやすく、純粋型付きの安全性の力も借りることができます。そしてElm-Architectureを知れば、もう書きまくるだけだという気持ちになるでしょう。

[^2]:Elmはファンクショナルリアクティブプログラミング(FRP)という分野の研究から生まれたこともあって、FRPとしても有名でした。しかし、v0.17へのバージョンアップでその機能（Signal型）を取り除きました。これはFRPの部分がElm初学者の壁になっていたことと、SignalのないElmでもElm-Architectureで書くことで、誰しもが以前と遜色ないアプリケーションを記述できることがわかったからです。なのでネットにはElmのFRPの記事等が残っていたりもしますが、今は使いません。
