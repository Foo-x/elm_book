
#型について

型とは、プログラミング言語中の単語の所属を表したものです。

```elm
> 0
0 : number
```

ここで`0`は、`number`という型の一員ということです。
`0`は`number`という型の実体（インスタンス）といいます。

Elmにはいろいろな型が用意され、自分で新しい型を定義することも出来ます。

##型の表記と推論

Elmはコンパイルするときに型の繋がりを検査して、おかしな所があれば教えてくれます。
その検査時に型の情報が書かれてあるとそれを使い、書かれていないと推論して自動で型を指定して検査します。

型を明示するには、変数や関数の上の行に書きます。

```elm
age : Int
age = 100

square : Int -> Int    -- 関数の場合は、引数の型を矢印でつないで書いていき、最後に関数が返す型名を書きます。
square n = n * n

```

##型検査（型チェック）

型とは、言わばソースコードに自動で付いているラベルのようなものです。
そのラベルの流れを検査して、おかしくないか調べる型検査がコンパイルの時に行われます。

型検査が通ると、型の流れはどうあれ、処理が最後まで定義どおりに行われることが保証されます。

```elm
> (+)
<function> : number -> number -> number
> 2
2 : number
> 3
3 : number
> 2 + 3
5 : number
```

「number -> number -> number」というnumberをとってnumberを返す`+`関数があります。
`+`関数は、何かしらnumber型の性質を利用して計算を行いnumber型を返す関数ということです。
ここで`+`関数の知らないnumber型以外の型を入れられると、バグになる危険性があります。

`2`はnumber型です。なので、number型に対して出来ることが`2`にも出来るということです。

`2 + 3`は型が合っています。このコードはバグにならないということです。

型チェックは人間のミスを事前に教えてもらえます。日本語で例えると「肉を食う」と「数字を食う」という文章があったとして、「食う」という関数の型が[食べ物 -> ()]であれば、「肉」と「数字」という言葉の型が「食べ物」に合っているかみて、「数字」は食えないからこのコードは動かないと教えてくれるようなものです。意味を調べているように見えて面白いです。

メモ：型検査は書いてあることが動くかどうかを検査するだけで、書いたコードが意図と違うとバグになります。「肉を食う」と書いてあって検査通るとしても、そもそも肉を食う必要がなかった、といった場合です。

##型で設計する。型で説明する。

作りたいプログラムの型になるまでの型の流れを考えて、型から考えるトップダウンでプログラムを書くことが出来ます。

```elm
type Chara = {...}           --プログラムに必要な型を定義
--powerUp : Chara -> Chara   --欲しい型の流れ
--hyouzi : Chara -> String
powerUp chara =  ...         --実装
```
