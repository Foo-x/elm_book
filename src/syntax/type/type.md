
#型について

型とは、プログラミング言語中の単語の所属を表したものです。Elmにはいろいろな型が用意され、自分で新しい型を定義することも出来ます。

elm-replで`0`と書いて、評価させてみます。

```elm
> 0
0 : number
```

結果、`0`は`number`型と出てきます。`1`や`2`と書くとこれも`number`型と出てきます。
`0`は`number`型所属の一員で、これを`0`は`number`という型の実体（インスタンス）といいます。


##型検査（型チェック）

型とは、プログラミング中では言わばソースコードに自動で付いているラベルのようなものです。
このラベルの繋がりを検査して、おかしくないか調べることがコンパイルの時に行われます。これを型検査といいます。

型検査が通ると、（型の流れはどうあれ）型の繋がりが正しく、処理がバグなく最後まで定義どおりに行われることが保証されます。

これを自分なりに説明してみます。

```elm
> (+)
<function> : number -> number -> number
> 2
2 : number
> 3
3 : number
> 2 + 3
5 : number
```

`+`関数は、数字を足し合わせる関数です。ここで`+`関数の知らないnumber型以外の型を入れられると、バグになる危険性があります。
しかし、elm-replで見てみると、「number -> number -> number」という型になっています。なのでnumber型以外を入れると、コンパイラがおかしいとエラーにして教えてくれます。

`2`と`3`を見てみると、number型です。このことは、number型を取る関数を`2`にも使うことが出来るということです。

結果、`2 + 3`は型が合っています。このコードはバグにならないということです。

日本語で例えると「肉を食う」と「数字を食う」という文章があったとして、「食う」という関数の型が[食べ物 -> ()]であれば、「肉」と「数字」という言葉の型が「食べ物」に合っているかみて、「数字」は食えないからこのコードは動かないと教えてくれるようなものです。型チェックはつい間違えた文章を書いてしまう人間のミスを事前に教えてもらえます。意味を調べているように見えて面白いところです。

メモ：また型検査は書いてあることが動くかどうかを検査するだけで、書いたコードが意図と違うとバグになります。これは「肉を食う」と書いてあって検査通るとしても、そもそも肉を食うコードが必要がなかった、という場合です。

##型の表記と推論

型の検査時に型の情報が書かれてあるとそれを使い、書かれていないと自動で型を指定して検査します。これを推論といいます。

型を明示的に指定するには、変数や関数の上の行に以下のように書きます。

```elm
age : Int              -- ageはInt型
age =
  100

square : Int -> Int    -- 関数の場合は、引数の型を矢印でつないで書いていき、最後に関数が返す型名を書きます。
square n =
  n * n

```

##型で設計する。型で説明する。

作りたいプログラムの型になるまでの型の流れを考えて、型から考えるトップダウンでプログラムを書くことが出来ます。

また型が書いてあると、読むときに何をするものなのかわかりやすくなります。

```elm
type Chara = {...}           --プログラムに必要な型を作る。

--powerUp : Chara -> Chara   --プログラムに必要な型の流れを考える。
powerUp chara =  ...         --実装する
--hyouzi : Chara -> String
```
